<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>KrishiMitra — Smart Farming Reimagined</title>

<style>
  :root {
    --sunrise: #f6b26b;
    --sunrise-soft: #ffe5b4;
    --text-dark: #1f1f1f;
  }

  body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(var(--sunrise), var(--sunrise-soft));
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  }

  /* HERO UI */
  .hero {
    position: absolute;
    left: 48px;
    top: 48px;
    max-width: 520px;
    color: var(--text-dark);
    z-index: 10;
  }

  .hero h1 {
    font-size: 42px;
    font-weight: 900;
    margin: 0;
    letter-spacing: -0.5px;
  }

  .hero p {
    margin-top: 14px;
    font-size: 18px;
    line-height: 1.55;
    opacity: 0.85;
  }

  /* FEATURE TAGS */
  .tag {
    position: absolute;
    background: rgba(255,255,255,0.95);
    padding: 10px 16px;
    border-radius: 22px;
    font-size: 14px;
    font-weight: 600;
    color: #2b2b2b;
    pointer-events: none;
    transform: translate(-50%, -50%);
    white-space: nowrap;
    box-shadow:
      0 10px 30px rgba(0,0,0,0.15),
      inset 0 1px 0 rgba(255,255,255,0.6);
    backdrop-filter: blur(6px);
  }
</style>

<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.164.1/build/three.module.js"
  }
}
</script>
</head>

<body>

<div class="hero">
  <h1>KrishiMitra</h1>
  <p>
    A next-generation smart farming platform that blends
    AI crop intelligence, precision irrigation, real-time
    weather forecasting, and farmer collaboration into
    one living ecosystem.
  </p>
</div>

<div class="tag" id="t1">AI Crop Intelligence</div>
<div class="tag" id="t2">Precision Irrigation</div>
<div class="tag" id="t3">Weather Forecasting</div>
<div class="tag" id="t4">Farmer Community</div>

<script type="module">
import * as THREE from "three";

/* ───────────────────────── SCENE ───────────────────────── */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xf6b26b);
scene.fog = new THREE.Fog(0xf6b26b, 40, 220);

/* ───────────────────────── CAMERA ───────────────────────── */
const camera = new THREE.PerspectiveCamera(50, innerWidth / innerHeight, 0.1, 500);

/* ───────────────────────── RENDERER ───────────────────────── */
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(innerWidth, innerHeight);
renderer.outputColorSpace = THREE.SRGBColorSpace;
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.toneMappingExposure = 1.25;
document.body.appendChild(renderer.domElement);

/* ───────────────────────── LIGHTING ───────────────────────── */
scene.add(new THREE.AmbientLight(0xffffff, 0.35));

const sun = new THREE.DirectionalLight(0xffd6a5, 2.8);
sun.position.set(80, 120, 60);
scene.add(sun);

const rim = new THREE.DirectionalLight(0xffffff, 1.4);
rim.position.set(-60, 40, -60);
scene.add(rim);

/* ───────────────────────── TERRAIN ───────────────────────── */
const groundGeo = new THREE.PlaneGeometry(500, 500, 80, 80);
groundGeo.rotateX(-Math.PI / 2);

const pos = groundGeo.attributes.position;
for (let i = 0; i < pos.count; i++) {
  const y = Math.sin(pos.getX(i) * 0.04) * 1.5 +
            Math.cos(pos.getZ(i) * 0.04) * 1.5;
  pos.setY(i, y);
}
groundGeo.computeVertexNormals();

const ground = new THREE.Mesh(
  groundGeo,
  new THREE.MeshStandardMaterial({
    color: 0x7a8450,
    roughness: 1
  })
);
scene.add(ground);

/* ───────────────────────── CROPS (WAVING) ───────────────────────── */
const crops = [];
const cropGeo = new THREE.CylinderGeometry(0.22, 0.22, 2.6, 6);
const cropMat = new THREE.MeshStandardMaterial({ color: 0x3f6b1b });

for (let x = -60; x <= 60; x += 3) {
  for (let z = -60; z <= -20; z += 2.2) {
    const c = new THREE.Mesh(cropGeo, cropMat);
    c.position.set(x + Math.random()*0.4, 1.3, z + Math.random()*0.4);
    c.rotation.y = Math.random() * Math.PI;
    scene.add(c);
    crops.push(c);
  }
}

/* ───────────────────────── FEATURE MONUMENTS ───────────────────────── */
const features = [];

function monument(x, z, color, height) {
  const m = new THREE.Mesh(
    new THREE.CylinderGeometry(1, 1, height, 12),
    new THREE.MeshStandardMaterial({ color })
  );
  m.position.set(x, height/2, z);
  scene.add(m);
  features.push(m);
}

monument(-22, 18, 0xc9a24d, 8); // AI
monument(22, 18, 0x4da3ff, 6);  // Irrigation
monument(-18, -18, 0x8c8c8c, 11); // Weather
monument(18, -18, 0x9b5de5, 7); // Community

/* ───────────────────────── CINEMATIC CAMERA PATH ───────────────────────── */
let t = 0;
function moveCamera() {
  t += 0.0009;
  camera.position.x = Math.cos(t) * 55;
  camera.position.z = Math.sin(t) * 55;
  camera.position.y = 22 + Math.sin(t * 2) * 2;
  camera.lookAt(0, 6, 0);
}

/* ───────────────────────── LABEL PROJECTION ───────────────────────── */
const tags = [
  document.getElementById("t1"),
  document.getElementById("t2"),
  document.getElementById("t3"),
  document.getElementById("t4")
];

function updateTags() {
  features.forEach((m, i) => {
    const p = m.position.clone();
    p.y += m.geometry.parameters.height + 2;
    p.project(camera);

    tags[i].style.left = ((p.x * 0.5 + 0.5) * innerWidth) + "px";
    tags[i].style.top  = ((-p.y * 0.5 + 0.5) * innerHeight) + "px";
  });
}

/* ───────────────────────── ANIMATE ───────────────────────── */
function animate() {
  requestAnimationFrame(animate);

  crops.forEach((c, i) => {
    c.rotation.z = Math.sin(t * 40 + i) * 0.08;
  });

  moveCamera();
  updateTags();
  renderer.render(scene, camera);
}
animate();

/* ───────────────────────── RESIZE ───────────────────────── */
addEventListener("resize", () => {
  camera.aspect = innerWidth / innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});
</script>

</body>
</html>
